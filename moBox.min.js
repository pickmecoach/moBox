!function(a){a.moBox=function(b){function d(){var b,a=document.createElement("div");return a.style.cssText="overflow: scroll; width: 100px; height: 100px; position:absolute; bottom: 100%",c.body.appendChild(a),b=a.offsetWidth-a.clientWidth,c.body.removeChild(a),b+"px"}function e(){var a=c.createElement("div");return a.style.WebkitTransition?"webkitTransitionEnd":"transitionend"}function f(a,b){var c,d=a;for(c in b)b.hasOwnProperty(c)&&(d[c]=b[c]);return d}function g(){this.closeButton&&this.closeButton.addEventListener("click",this.close.bind(this)),this.overlay&&this.overlay.addEventListener("click",this.close.bind(this))}function j(){var a,b,d,e=this.options,f=this.modal,g=this.container,h=this.closeButton,i=this.overlay;a="object"==typeof e.content?e.content.innerHTML:e.content,g=c.createElement("div"),g.className="moBox",d=c.createElement("div"),d.className="moBox__panel",f=c.createElement("div"),f.className="moBox__modal moBox__modal_"+e.modalType,f.style.maxWidth=e.maxWidth+"px",f.style.minWidth=e.minWidth+"px",f.style.cssText="max-width: "+e.maxWidth+"px; min-width: "+e.minWidth+"px;",f.appendChild(d),e.closeButton===!0&&(h=c.createElement("button"),h.className="moBox__close",h.innerHTML="x",f.appendChild(h)),b=c.createElement("div"),b.className="moBox__content",b.innerHTML=a,f.appendChild(b),e.overlay===!0&&(i=c.createElement("div"),i.className="moBox__overlay moBox__overlay_"+e.overlayType),i.appendChild(f),g.appendChild(i),this.modal=f,this.container=g,this.closeButton=h,this.overlay=i,c.body.appendChild(this.container)}function l(){this.modal=null,this.overlay=null,this.closeButton=null,this.container=null,this.transitionEnd=e(),this.scrollBarWidth=d(),arguments[0]&&"object"==typeof arguments[0]?this.options=f(k,arguments[0]):this.options=k,this.open=function(){j.call(this),g.call(this);var b=this.modal,d=this.overlay;getComputedStyle(b).height,this.container.setAttribute("data-state","open"),c.body.style.cssText="overflow: hidden; padding-right: "+this.scrollBarWidth+";",b.offsetHeight>a.innerHeight&&(b.setAttribute("data-anchored",""),d.style.overflow="auto")},this.close=function(a){if(a.stopPropagation(),a.target===this.overlay||a.target===this.closeButton){var d=(this.modal,this.container),e=this.overlay;d.removeAttribute("data-state"),this.options.animation?e.addEventListener(this.transitionEnd,function(a){a.target===this&&c.body.contains(d)&&(a.stopImmediatePropagation(),d.parentNode.removeChild(d),c.body.style.cssText="")}):d.parentNode.removeChild(d)}}}var c=document,k={modalType:"fade",overlayType:"fade",maxWidth:600,minWidth:280,overlay:!0,content:"",closeButton:!0,animation:!0};return new l(b)}}(window);
